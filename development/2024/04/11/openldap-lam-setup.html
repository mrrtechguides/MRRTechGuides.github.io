<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>OpenLDAP and LAMPro on Ubuntu 23.10 | MRR Personal Blog</title>
<meta name="generator" content="Jekyll v4.3.3">
<meta property="og:title" content="OpenLDAP and LAMPro on Ubuntu 23.10">
<meta name="author" content="Marvin R">
<meta property="og:locale" content="en_US">
<meta name="description" content="OpenLDAP (Lightweight Directory Access Protocol) is an open-source implementation of the LDAP protocol, which is a directory service protocol used for accessing and maintaining distributed directory information services over a network. It’s commonly used for centralized authentication, authorization, and information lookup services in a networked environment. OpenLDAP provides a platform-independent, standards-based infrastructure for managing and organizing directory data.">
<meta property="og:description" content="OpenLDAP (Lightweight Directory Access Protocol) is an open-source implementation of the LDAP protocol, which is a directory service protocol used for accessing and maintaining distributed directory information services over a network. It’s commonly used for centralized authentication, authorization, and information lookup services in a networked environment. OpenLDAP provides a platform-independent, standards-based infrastructure for managing and organizing directory data.">
<link rel="canonical" href="/jekyll-theme-yat/development/2024/04/11/openldap-lam-setup.html">
<meta property="og:url" content="/jekyll-theme-yat/development/2024/04/11/openldap-lam-setup.html">
<meta property="og:site_name" content="MRR Personal Blog">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-04-11T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="OpenLDAP and LAMPro on Ubuntu 23.10">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Marvin R"},"dateModified":"2024-04-11T00:00:00+00:00","datePublished":"2024-04-11T00:00:00+00:00","description":"OpenLDAP (Lightweight Directory Access Protocol) is an open-source implementation of the LDAP protocol, which is a directory service protocol used for accessing and maintaining distributed directory information services over a network. It’s commonly used for centralized authentication, authorization, and information lookup services in a networked environment. OpenLDAP provides a platform-independent, standards-based infrastructure for managing and organizing directory data.","headline":"OpenLDAP and LAMPro on Ubuntu 23.10","mainEntityOfPage":{"@type":"WebPage","@id":"/jekyll-theme-yat/development/2024/04/11/openldap-lam-setup.html"},"url":"/jekyll-theme-yat/development/2024/04/11/openldap-lam-setup.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="icon" href="">
  <link rel="canonical" href="">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/jekyll-theme-yat/assets/css/main.css">
  <script src="/jekyll-theme-yat/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="/jekyll-theme-yat/feed.xml" title="MRR | Personal Blog">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js" async></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/umd/photoswipe-lightbox.umd.min.js" async></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/umd/photoswipe.umd.min.js" async></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/photoswipe.min.css" rel="stylesheet">
<style>
  .pswp .pswp__container .pswp__img {
    background-color: white;
  }
</style>

<script>
  function initPhotoSwipe() {
    let customOptions = {};

    try {
      const data = ``.replaceAll("=>", ":");
      customOptions = JSON.parse(data);
    } catch (e) {
      console.info("Invalid custom photo previewer options! " + e.message);
    }

    // Define object and gallery options
    const options = Object.assign(
      {
        gallery: "section.main",
        children: "a.photo-swipe",
        photo_scale: 2,
        // dynamic import is not supported in UMD version
        pswpModule: PhotoSwipe,
      },
      customOptions
    );

    const galleryEl = document.querySelector(options.gallery);
    if (!galleryEl) {
      return;
    }

    const imgEls = [];
    const els = galleryEl.querySelectorAll("img:not(.emoji)");
    els.forEach((el) => {
      if (el.src.trim() == "") {
        return;
      }
      if (!imgEls.includes(el)) {
        imgEls.push(el);
      }
    });

    if (imgEls.length === 0) {
      return;
    }

    imgEls.forEach((imgEl) => {
      imgEl.outerHTML = `
      <a class="photo-swipe"
        href="${imgEl.src}"
        data-pswp-width="${
          Math.max(imgEl.naturalWidth, imgEl.width) * options.photo_scale
        }"
        data-pswp-height="${
          Math.max(imgEl.naturalHeight, imgEl.height) * options.photo_scale
        }"
        data-pswp-caption="${imgEl.getAttribute("caption") || imgEl.alt}"
        target="_blank">
        ${imgEl.outerHTML}
      </a>`;
    });

    // Initialize PhotoSwipe 5
    var lightbox = new PhotoSwipeLightbox(options);

    lightbox.init();
  }

  window.addEventListener("load", initPhotoSwipe);
</script>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/jekyll-theme-yat/">
  <img class="site-favicon" title="MRR | Personal Blog" src="" onerror="this.style.display='none'">
  MRR | Personal Blog
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/jekyll-theme-yat/archives.html">ARCHIVES</a><a class="page-link" href="/jekyll-theme-yat/categories.html">CATEGORIES</a><a class="page-link" href="/jekyll-theme-yat/">HOME</a><a class="page-link" href="/jekyll-theme-yat/tags.html">TAGS</a>









<div class="page-link" style="display: inline;">



<div id="google_translate_element" style="display: none;">
</div>

<div class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="es">
          
          <img src="https://cdn.countryflags.com/thumbs/spain/flag-400.png" title="español">
          
        </a>
      </li>
    
  </ul>
</div>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async></script>
</div>
</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<div id="click-to-top" class="click-to-top">
  <i class="fa fa-arrow-up"></i>
</div>
<script>
  (function () {
    const clickToTop = document.getElementById('click-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        clickToTop.classList.add('show')
      }else {
        clickToTop.classList.remove('show')
      }
    });
    clickToTop.addEventListener('click', () => {
      window.smoothScrollTo(0);
    });
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">OpenLDAP and LAMPro on Ubuntu 23.10</h1>
  <h2 class="post-subtitle"></h2>

  <div class="post-meta">
    <time class="dt-published" datetime="2024-04-11T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Apr 11, 2024
    </time>
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 7 mins</span>
  </div>
<div class="post-tags">
<a class="post-tag" href="/jekyll-theme-yat/tags.html#OpenLDAP">#OpenLDAP</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#LAM">#LAM</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#LAMPRO">#LAMPRO</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#LDAPAccountManager">#LDAPAccountManager</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#Ubuntu">#Ubuntu</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#Linux">#Linux</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#Account%20Management">#Account Management</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#Authorization">#Authorization</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#Accounts">#Accounts</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#Active%20Directory">#Active Directory</a>
</div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <p>OpenLDAP (Lightweight Directory Access Protocol) is an open-source implementation of the LDAP protocol, which is a directory service protocol used for accessing and maintaining distributed directory information services over a network. It’s commonly used for centralized authentication, authorization, and information lookup services in a networked environment. OpenLDAP provides a platform-independent, standards-based infrastructure for managing and organizing directory data.</p>

<p>LAM (LDAP Account Manager), also known as LAM Pro, is a web-based LDAP administration tool specifically designed for managing LDAP directories. It provides a user-friendly interface for administrators to manage users, groups, organizational units, and other directory objects. LAM simplifies tasks such as creating, modifying, and deleting directory entries, as well as managing access control and permissions.</p>

<p>Both OpenLDAP and LAM are powerful tools for managing directory services within an infrastructure for several reasons:</p>

<ol>
  <li>
    <p><strong>Centralized Authentication and Authorization</strong>: OpenLDAP allows organizations to centralize user authentication and authorization processes. This means users can access multiple services and resources using a single set of credentials stored in the LDAP directory.</p>
  </li>
  <li>
    <p><strong>Scalability</strong>: OpenLDAP is highly scalable and can handle large volumes of directory data and user requests. This makes it suitable for both small organizations and large enterprises.</p>
  </li>
  <li>
    <p><strong>Standards Compliance</strong>: OpenLDAP adheres to industry standards, particularly the LDAP protocol, ensuring compatibility with a wide range of applications and systems.</p>
  </li>
  <li>
    <p><strong>Web-based Management Interface</strong>: LAM provides a user-friendly web interface for managing the LDAP directory, reducing the complexity of directory administration tasks and making them accessible to non-technical users.</p>
  </li>
  <li>
    <p><strong>Role-based Access Control</strong>: Both OpenLDAP and LAM support role-based access control (RBAC), allowing administrators to define granular permissions and access levels for different users and groups.</p>
  </li>
  <li>
    <p><strong>Customizability</strong>: OpenLDAP and LAM are highly customizable, allowing administrators to extend their functionality and integrate them with other systems and applications as needed.</p>
  </li>
</ol>

<h3 id="install-and-configure-slapd">Install and Configure SLAPD</h3>

<ul>
  <li>Install slapd and ldap utilities packages
<code class="language-plaintext highlighter-rouge">sudo apt install slapd ldap-utils</code>
</li>
  <li>Configure slapd with organization information
  <code class="language-plaintext highlighter-rouge">sudo dpkg-reconfigure slapd</code>
    <ul>
      <li>Omit OpenLDAP server configuration?  <code class="language-plaintext highlighter-rouge">No</code>
</li>
      <li>DNS Domain name: ex. <code class="language-plaintext highlighter-rouge">organization.com</code>
</li>
      <li>Organization name: ex. <code class="language-plaintext highlighter-rouge">organization</code>
</li>
      <li>Administrator password</li>
      <li>Do you want the database to be removed when salpd is purged? (it’s up to your preference)</li>
      <li>Move old database? <code class="language-plaintext highlighter-rouge">Yes</code>
</li>
    </ul>
  </li>
  <li>Configure ldap configuration file
<code class="language-plaintext highlighter-rouge">sudo vim /etc/ldap/ldap.conf</code>
    <ul>
      <li>Set Base to dc=organization,dc=com</li>
      <li>Set URI to ldaps:/// ldapi:// ldap://</li>
    </ul>
  </li>
  <li>Configure Groups module
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">sudo vim base-groups.ldif</code>
        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  dn: ou=People,dc=organization,dc=com
  objectClass: organizationalUnit
  ou: People

  dn: ou=Groups,dc=organization,dc=com
  objectClass: organizationalUnit
  ou: Groups
</code></pre></div>        </div>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sudo ldapadd -x -D cn=admin,dc=organization,dc=com -W -f base-groups.ldif</code></li>
    </ul>
  </li>
  <li>Configure Password policy module
    <ul>
      <li>Create LDIF file for password policy module and add the content below
<code class="language-plaintext highlighter-rouge">sudo vim load-ppolicy-mod.ldif</code>
        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  dn: cn=module{0},cn=config
  changetype: modify
  add: olcModuleLoad
  olcModuleLoad: ppolicy.la
</code></pre></div>        </div>
      </li>
      <li>Run command to load the module to openldap
   <code class="language-plaintext highlighter-rouge">sudo ldapadd -Y EXTERNAL -H ldapi:/// -f load-ppolicy-mod.ldif</code>
</li>
      <li>Install password quality tool that can be configured to be used for password quality checking
   <code class="language-plaintext highlighter-rouge">sudo apt-get install libpwquality-tools</code>
</li>
    </ul>
  </li>
</ul>

<h3 id="secure-openldap-with-tlsssl">Secure OpenLDAP with TLS/SSL</h3>
<ul>
  <li>Create certificates according to organization needs.
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/ldapserver.key -out /etc/ssl/ldapserver.crt
  sudo chown openldap:openldap /etc/ssl/{ldapserver.crt,ldapserver.key}
  sudo cp /etc/ssl/ldapserver.crt /usr/local/share/ca-certificates
  sudo cp /etc/ssl/ldapserver.crt /usr/share/ca-certificates
</code></pre></div>    </div>
  </li>
  <li>Edit LDAP configuration file to use the CA Certificate
<code class="language-plaintext highlighter-rouge">sudo vim /etc/ldap/ldap.conf</code>
    <ul>
      <li>Change TLS CACERT to <code class="language-plaintext highlighter-rouge">/etc/ssl/certs/ldapserver.pem</code>
</li>
    </ul>
  </li>
  <li>In home directory create the TLS LDIF file to load to openLDAP
    <ul>
      <li>Create file
  <code class="language-plaintext highlighter-rouge">vim tls.ldif</code>
</li>
      <li>Add the follwing contets to the file to map to SSL certificates
        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>   dn: cn=config
  changetype: modify
  add: olcTLSCACertificateFile
  olcTLSCACertificateFile: /etc/ssl/certs/ldapserver.pem
  -
  add: olcTLSCertificateFile
  olcTLSCertificateFile: /etc/ssl/ldapserver.crt
  -
  add: olcTLSCertificateKeyFile
  olcTLSCertificateKeyFile: /etc/ssl/ldapserver.key

</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Load SSL certificates to openLDAP
 <code class="language-plaintext highlighter-rouge">sudo ldapadd -Y EXTERNAL -H ldapi:/// -f tls.ldif</code>
 <code class="language-plaintext highlighter-rouge">sudo sed -i 's|/etc/ssl/certs/ca-certificates.crt|/etc/ssl/ldapserver.crt|' /etc/ldap/ldap.conf</code>
</li>
  <li>Setup OpenLDAP to use LDAPS( LDAP over SSL) instead of LDAP
  <code class="language-plaintext highlighter-rouge">sudo vim /etc/default/slapd</code>
    <ul>
      <li>Under SLAPD_SERVICES add LDAPS:/// and remove LDAP:///</li>
    </ul>
  </li>
  <li>Restart the SLAPD Service
  <code class="language-plaintext highlighter-rouge">sudo systemctl restart slapd</code>
</li>
</ul>

<h3 id="ldap-account-manager-using-nginx-lam">LDAP Account Manager using NGINX (LAM)</h3>
<p>If using PRO Version download PRO Version from LAM Pro website, if not download free version: Website: https://www.ldap-account-manager.org/lamcms/releases</p>
<ul>
  <li>Make work directory to install LAM
<code class="language-plaintext highlighter-rouge">mkdir /home/user/lam</code>
<code class="language-plaintext highlighter-rouge">cd lam</code>
</li>
  <li>Copy LAM Deb package from website over to ldap server under work directory.</li>
  <li>Install the package
 <code class="language-plaintext highlighter-rouge">sudo dpkg -I deb_package</code>
</li>
  <li>Fix broken install to download dependencies needed for the package to install successfully
<code class="language-plaintext highlighter-rouge">sudo apt --fix-broken install</code>
</li>
  <li>Install NGINX Package
<code class="language-plaintext highlighter-rouge">sudo apt install nginx</code>
</li>
  <li>Remove apache and mark hold libraries needed for LAM to work
    <code class="language-plaintext highlighter-rouge">
       sudo apt-mark hold libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.3-0
       sudo apt purge apache2*
       sudo rm -r /var/lib/apache2
      sudo apt autoremove
     </code>
</li>
  <li>Setup SSL certificates for NGINX web server hosting LAM
  <code class="language-plaintext highlighter-rouge">sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/nginx-selfsigned.key -out /etc/ssl/certs/nginx-selfsigned.crt</code>
</li>
  <li>Install PHP files
   <code class="language-plaintext highlighter-rouge">sudo apt install php8.2-common php8.2-fmp</code>
</li>
  <li>Edit the nging default site to load LAM
  <code class="language-plaintext highlighter-rouge">sudo vim/etc/nginx/sites-available/default</code>
    <ul>
      <li>Replace the file with the following content
        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  server {
      listen 80;
      server_name 192.168.160.74;
		 
      # Redirect HTTP to HTTPS
      return 301 https://$host$request_uri;
  }
  server {
      listen 443 ssl;
      server_name 192.168.160.71;
		 
      # SSL certificate configuration
      ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
      ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;
		 
      # LAM root directory
      root /usr/share/ldap-account-manager/;
      index index.php index.html;
		    
      # PHP-FPM configuration
      location ~ \.php$ {
          fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
          fastcgi_param SCRIPT_FILENAME$document_root$fastcgi_script_name;
          include fastcgi_params;
      }
		    
      # Deny access to sensitive files
      location ~ /\.ht {
          deny all;
      }
  }
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Modify permissions for lam configuration files
  <code class="language-plaintext highlighter-rouge">sudo chown www-data:www-data /usr/share/ldap-account-manager</code>
</li>
  <li>Restart NGINX
 <code class="language-plaintext highlighter-rouge">sudo systemctl restart nginx</code>
</li>
</ul>

<p>Now the user should be able to visit https://server_address top login to LAM.</p>

<h3 id="configure-lam-through-web">Configure LAM through WEB</h3>

<ul>
  <li>Select LAM Configuration in the top left</li>
  <li>Click edit settings - password is lam
    <ul>
      <li>Add license if you have the pro version</li>
      <li>Change the master password to be more secure</li>
      <li>Click save and then go back to LAM Configuration page</li>
    </ul>
  </li>
  <li>Click on server profiles, password is lam
    <ul>
      <li>Make the following changes:
        <ul>
          <li>Server address: <code class="language-plaintext highlighter-rouge">ldaps:///</code>
</li>
          <li>Tree suffic: <code class="language-plaintext highlighter-rouge">dc=organization,dc=com</code>
</li>
          <li>List of valid users: <code class="language-plaintext highlighter-rouge">cn=admin,dc=organization,dc=com</code>
</li>
          <li>Change password for server profile to be more secure</li>
          <li>Click on the second tab : Account Types and update active account type.
            <ul>
              <li>Groups : dc=Groups, dc=organization, dc=com</li>
              <li>Users: dc=People, dc=organization, dc=com</li>
            </ul>
          </li>
          <li>Save</li>
        </ul>
      </li>
      <li>On login screen type admin credentials for LDAP Admin Account and you should be able to login and manage OpenLDAP thorugh LAM</li>
    </ul>
  </li>
</ul>

<p>In summary, OpenLDAP and LAM are powerful tools for managing directory services, providing centralized authentication and authorization, scalability, standards compliance, ease of administration, and flexibility to meet the needs of diverse infrastructures.</p>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/jekyll-theme-yat/development/2024/04/09/Proxmox-VMWare-blog.html" title="Enterprise Virtualization in Linux using Proxmox - Open Source">Enterprise Virtualization in Linux using Proxmox...</a><span></span>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li class="top-post">
          <a class="post-link" href="/jekyll-theme-yat/development/2024/04/11/openldap-lam-setup.html" title="OpenLDAP and LAMPro on Ubuntu 23.10">
            OpenLDAP and LAMPro on Ubuntu 23.10<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
<li class="top-post">
          <a class="post-link" href="/jekyll-theme-yat/markdown/2017/06/10/quick-mardown-example.html" title="Quick markdown example">
            Quick markdown example<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
<li class="top-post">
          <a class="post-link" href="/jekyll-theme-yat/development/2024/04/09/Proxmox-VMWare-blog.html" title="Enterprise Virtualization in Linux using Proxmox - Open Source">
            Enterprise Virtualization in Linux using Proxmox - Open Source<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main>


  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none}
    span.s2 {text-decoration: underline ; font-kerning: none; color: #0000e9; -webkit-text-stroke: 0px #0000e9}
  </style>


<p class="p1"><span class="s1"></span></p>
<p class="p1"><span class="s1">© 2024-2024 Marvin R"</span></p>
<p class="p1"><span class="s1">Powered by <a href="https://jekyllrb.com/"><span class="s2">Jekyll</span></a> &amp; <a href="https://github.com/jeffreytse/jekyll-theme-yat"><span class="s2">Yat Theme</span></a>.</span></p>


</body>
</html>
